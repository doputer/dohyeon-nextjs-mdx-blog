{"componentChunkName":"component---src-templates-blog-post-js","path":"/article/wysiwyg-draft-js/","result":{"data":{"site":{"siteMetadata":{"title":"DOPUTER","author":"김도현","siteUrl":"https://doputer.github.io","comment":{"disqusShortName":"","utterances":"doputer/doputer.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"fe0e3d73-a5d6-53fd-b735-5fecca48fda3","excerpt":"위지윅(WYSIWYG)이란? 위지위그(WYSIWYG: What You See Is What You Get, “보는 대로 얻는다”)는 문서 편집 과정에서 화면에 포맷된 낱말, 문장이 출력물과 동일하게 나오는 방식을 말한다. 쉽게 말해서 우리가 티스토리에서 글쓰기를 눌렀을 때 나오는 에디터가 WYSIWYG 에디터이다.  HTML  태그에서 bold, italic…","html":"<h2 id=\"위지윅wysiwyg이란\" style=\"position:relative;\"><a href=\"#%EC%9C%84%EC%A7%80%EC%9C%85wysiwyg%EC%9D%B4%EB%9E%80\" aria-label=\"위지윅wysiwyg이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>위지윅(WYSIWYG)이란?</h2>\n<blockquote>\n<p>위지위그(WYSIWYG: What You See Is What You Get, “보는 대로 얻는다”)는 문서 편집 과정에서 화면에 포맷된 낱말, 문장이 출력물과 동일하게 나오는 방식을 말한다.</p>\n</blockquote>\n<p>쉽게 말해서 우리가 티스토리에서 글쓰기를 눌렀을 때 나오는 에디터가 WYSIWYG 에디터이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 107.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAACNklEQVQ4y61UyW4TQRBtwCgmF3+Dg8Ix+Q3fIz7BCatDQpCFJkA4ocDH4CVB4mCQ4k+I5QO5eFO8jLfZvI3Hj6matOWYIcQhJT1Vd0931aue1yXW19awsvIQ4XAYq6uPEAqFIIS4FgKBAJaWgrhz9x6Wg/fxILgM8W5/H4qiYGf3NeLxt9h7E8ernV28eBnD02fPEY1uYXPzCaKMLQbNCbHYNg4OPuLDewVfPinY2HgMMRqNMB6PYds2HMdx/QjS6vU6crncdC73SKMxnZWWyWQgJpMJf5iHTCITSvjt9WKMkUymIOjQdY0O+kGyTSSSEOVyGaVSCbVaDZVKxS2zwZ7hfquenyOfz4P2yaDzCWTAKcPhcMilSfT7ffR6PQwGA54bhgHTNP/K8lJAOiixSPnzRgFTKTcgsaHspmkxI2JLoLFk6g+LPe0hMEMKqGldlker1UK73WY0Gg2e626pVK6madB1fTrudrvsO50Oj4kQKeD46Mi7Q8rgsfPuUDJdtOSTn98hKKt1UYZlWZyNvKEbzMq7Dg/y59C6FPTsTzn54QZ0nMlUnAwf0V6lv9mA347dkue1tYj5yuaqF/AvzDP8I+BNWU51eNsB0yxsVyKyJd0k6OWSk177+h/MKiJJ3Qa3aImvCQgSqGyi9Dro5dhjm/1sY52F7FCk2V9nZ8hmsyz4dCoNQe+Yep+qqigWi6hWq/yWaZ3WmmqTvXrhm80mfy8UCui47/7w8DMikQhOT3P8l38D0VdTK4aBoDwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tistory-editor\"\n        title=\"tistory-editor\"\n        src=\"/static/439aa615c91e2ea898bb5bb6f9e97ba0/d9199/tistory-editor.png\"\n        srcset=\"/static/439aa615c91e2ea898bb5bb6f9e97ba0/5a46d/tistory-editor.png 300w,\n/static/439aa615c91e2ea898bb5bb6f9e97ba0/0a47e/tistory-editor.png 600w,\n/static/439aa615c91e2ea898bb5bb6f9e97ba0/d9199/tistory-editor.png 960w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>HTML <code class=\"language-text\">&lt;textarea></code> 태그에서 bold, italic 등을 적용할 수 있고, 적용되자마자 보인다고 생각하면 편하다.</p>\n<h2 id=\"위지윅-에디터를-이용하기에-앞서\" style=\"position:relative;\"><a href=\"#%EC%9C%84%EC%A7%80%EC%9C%85-%EC%97%90%EB%94%94%ED%84%B0%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B8%B0%EC%97%90-%EC%95%9E%EC%84%9C\" aria-label=\"위지윅 에디터를 이용하기에 앞서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>위지윅 에디터를 이용하기에 앞서</h2>\n<p>처음 개발 프로젝트에서 위지윅 에디터가 필요해서 직접 구현하려고 했다. 보통 웹에서 에디터를 개발할 때는 <a href=\"https://developer.mozilla.org/ko/docs/Web/HTML/Global_attributes/contenteditable\">contentEditable</a>과 <a href=\"https://developer.mozilla.org/ko/docs/Web/API/Document/execCommand\">document.execCommand()</a>를 이용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">contenteditable</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token comment\">&lt;!-- &lt;div> 태그를 &lt;textarea> 태그처럼 사용할 수 있게 해준다. --></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">document<span class=\"token punctuation\">.</span><span class=\"token function\">execCommand</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bold'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">/* 선택영역(텍스트를 드래그 한 영역)의 양쪽에 &lt;b> 태그 혹은 &lt;strong> 태그를 삽입한다. */</span></code></pre></div>\n<p>그런데 contentEditable은 표준이 아니기 때문에 브라우저마다 다르게 동작한다. 예를 들어 브라우저마다 bold를 표시할 때 <code class=\"language-text\">&lt;b></code> 태그를 사용하기도 하고, <code class=\"language-text\">&lt;strong></code> 태그를 사용하기도 한다. 그뿐만 아니라 줄 바꿈 또한 <code class=\"language-text\">&lt;br></code>와 <code class=\"language-text\">&lt;div></code>를 사용하는 등 마찬가지이다. 심지어 document.execCommand()의 명령어 동작도 브라우저마다 다르다고 한다.</p>\n<p>그리고 document.execCommand()의 동작 방식은 선택영역의 양쪽에 태그를 삽입하는 식이기 때문에 아래와 같은 불상사가 발생했을 때 대처하기 힘들다. 태그끼리 꼬이는 현상이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">가나<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b</span><span class=\"token punctuation\">></span></span>다<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>i</span><span class=\"token punctuation\">></span></span>라<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b</span><span class=\"token punctuation\">></span></span>마<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>i</span><span class=\"token punctuation\">></span></span>사아자카타파하</code></pre></div>\n<p>물론 이런 부분들을 직접 해결할 수 있었지만, 시간적인 제약도 있고, 요즘에는 잘 구현되어있는 WYSIWYG 에디터들이 많아서 이것 중에 하나를 이용하기로 했다.</p>\n<ul>\n<li>Quill</li>\n<li>Draft.js</li>\n<li>Summernote</li>\n<li>TinyMCE</li>\n</ul>\n<p>이 포스팅에서는 각 에디터를 비교하지 않기로 한다. 직접 조금씩 사용해본 결과 <strong>Draft.js</strong>가 가장 마음에 들어서 활용해보기로 했다.</p>\n<h2 id=\"직접-이용한-draftjs\" style=\"position:relative;\"><a href=\"#%EC%A7%81%EC%A0%91-%EC%9D%B4%EC%9A%A9%ED%95%9C-draftjs\" aria-label=\"직접 이용한 draftjs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>직접 이용한 Draft.js</h2>\n<p><img src=\"/fa25b8e4c6cec7ebb8f95701e2e22d2c/draft-js.gif\" alt=\"draft-js\"></p>\n<p><a href=\"https://draftjs.org/\">문서</a>도 잘 되어있고, 막히는 부분은 개발 커뮤니티를 통해서 충분히 해결 가능했다. 블록 스타일과 선택 영역 스타일을 제공하는데, 기본적으로 블록 스타일에서는 <code class=\"language-text\">&lt;h1>~&lt;h6></code> , <code class=\"language-text\">&lt;ul></code> , <code class=\"language-text\">&lt;ol></code> , <code class=\"language-text\">&lt;blockquote></code> , <code class=\"language-text\">&lt;code></code> 등을 제공하고, 선택 영역 스타일에서는 <strong>bold</strong>, <em>italic</em>, <u>underline</u>, <del>strikethrough</del> 를 제공한다. 나는 추가적 text-align이 필요했기 때문에 커스텀 블록 스타일로 left, center, right를 추가했다. 필요에 따라서 첨부 파일, 링크, 주석, 테이블 스타일을 추가할 수 있다. 문서화가 잘 되어있기 때문에 손쉽게 추가할 수 있다.</p>\n<p>작성한 내용을 추출하거나(html 혹은 markdown), 추출된 내용을 다시 에디터로 불러오는 부분은 외부 패키지를 이용하면 된다. 나는 <a href=\"https://www.npmjs.com/package/draftjs-to-html\">draftjs-to-html</a>과 <a href=\"https://www.npmjs.com/package/html-to-draftjs\">html-to-draftjs</a>를 이용해서 추출한 내용을 DB에 저장하고, 불러왔다.</p>\n<h2 id=\"소스코드\" style=\"position:relative;\"><a href=\"#%EC%86%8C%EC%8A%A4%EC%BD%94%EB%93%9C\" aria-label=\"소스코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>소스코드</h2>\n<p>개발 스택은 React, TypeScript이다.</p>\n<p><a href=\"https://github.com/doputer/draft-react-ts\">https://github.com/doputer/draft-react-ts</a></p>","frontmatter":{"title":"WYSIWYG 에디터 draft.js의 기록 👀","date":"2021-09-03"}}},"pageContext":{"slug":"/article/wysiwyg-draft-js/","previous":{"fields":{"slug":"/article/decorating-github-profile/"},"frontmatter":{"title":"Github 프로필 꾸미기 👑"}},"next":null}}}